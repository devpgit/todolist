(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{154:function(e,t,a){e.exports=a(328)},314:function(e,t,a){},316:function(e,t,a){},318:function(e,t,a){},320:function(e,t,a){},326:function(e,t,a){},328:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),s=a.n(o),c=a(48),l=a(49),i=a(54),u=a(50),m=a(55),d=a(110),p=a(25),f=(a(159),a(148)),h=a(16),b=a.n(h),v=a(28),E=(a(87),a(24)),k=(a(167),a(151)),y=(a(114),a(83)),g=(a(138),a(22)),_=(a(137),a(57)),D=a(152),j=a(139),O=a.n(j).a.create({baseURL:"http://localhost:5000/api",timeout:5e3}),w=a(8),x=a.n(w),Y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={edit:!1,default:{startTime:"2019/01/01",endTime:"2019/01/01",summary:""}},a.deleteHandler=function(){var e=Object(v.a)(b.a.mark(function e(t,n,r){var o;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,O.delete("/todolist",{data:{id:n,token:r}});case 3:o=e.sent,a.resultHandler(o,"\u522a\u9664\u6210\u529f","\u522a\u9664\u5931\u6557");case 5:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.resultHandler=function(e,t,n){"OK"===e.data.data?(E.a.success(t),a.props.reload()):E.a.error(n)},a.confirmHandler=function(){var e=Object(v.a)(b.a.mark(function e(t,n,r){var o;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="confirmed"===r?"tentative":"confirmed",e.next=3,O.patch("/todolist",{id:t,token:n,status:r});case 3:o=e.sent,a.resultHandler(o,"\u8a2d\u5b9a\u5b8c\u6210","\u8a2d\u5b9a\u5931\u6557");case 5:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.setVisible=function(e,t,n,r){null!=e&&e.preventDefault(),a.setState({edit:t}),a.props.form.resetFields(),t&&a.getDefault(n,r)},a.getDefault=function(){var e=Object(v.a)(b.a.mark(function e(t,n){var r,o;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("/todolist/".concat(t,"?token=").concat(n));case 2:r=e.sent,(o=Object(D.a)({},a.state.default)).startTime=r.data.data.start.dateTime,o.endTime=r.data.data.end.dateTime,o.summary=r.data.data.summary,a.setState({default:o});case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.updateHandler=function(){var e=Object(v.a)(b.a.mark(function e(t,n){var r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("update",t,n),r=a.props.form.getFieldsValue(),a.props.form.validateFields(function(){var e=Object(v.a)(b.a.mark(function e(o){var s,c,l,i;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return s=r.endDate.format("YYYY-MM-DD"),c=r.startDate.format("YYYY-MM-DD"),l=r.summary,console.log("input",r),a.setVisible(null,!1),e.next=9,O.patch("/todolist",{id:t,token:n,summary:l,startDate:c,endDate:s});case 9:i=e.sent,a.resultHandler(i,"\u8a2d\u5b9a\u5b8c\u6210","\u8a2d\u5b9a\u5931\u6557");case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a={initialValue:x()(this.state.default.startTime,"YYYY-MM-DD"),rules:[{type:"object",required:!0,message:"\u8acb\u9078\u64c7\u65e5\u671f"}]},n={initialValue:x()(this.state.default.endTime,"YYYY-MM-DD"),rules:[{type:"object",required:!0,message:"\u8acb\u9078\u64c7\u65e5\u671f"}]};return r.a.createElement("li",{className:"confirmed"!==this.props.status?"todo__item":"todo__item--complete"},r.a.createElement("div",{className:"form__checkbox-group"},r.a.createElement("input",{onChange:function(t){return e.confirmHandler(e.props.id,e.props.token,e.props.status)},type:"checkbox",className:"form__checkbox-input",id:this.props.id}),r.a.createElement("label",{htmlFor:this.props.id,className:"form__checkbox-label"},r.a.createElement("span",{className:"form__checkbox-button"}))),r.a.createElement("div",{className:"todo__content"},r.a.createElement("div",{className:"form__group"},r.a.createElement("span",null,this.props.content))),r.a.createElement("div",{className:"todo__actions"},r.a.createElement("a",{onClick:function(t){return e.setVisible(t,!0,e.props.id,e.props.token)},href:"./"},r.a.createElement("i",{className:"todo__icon icon-basic-todolist-pen"}),"\u7de8\u8f2f"),r.a.createElement("a",{onClick:function(t){return e.deleteHandler(t,e.props.id,e.props.token)},href:"./"},r.a.createElement("i",{className:"todo__icon icon-basic-trashcan"}),"\u522a\u9664")),r.a.createElement(k.a,{title:"\u66f4\u65b0",style:{top:20},visible:this.state.edit,onOk:function(){return e.updateHandler(e.props.id,e.props.token)},onCancel:function(t){return e.setVisible(t,!1)}},r.a.createElement(g.a,null,r.a.createElement(g.a.Item,{label:"\u958b\u59cb\u65e5\u671f"},t("startDate",a)(r.a.createElement(_.a,null))),r.a.createElement(g.a.Item,{label:"\u7d50\u675f\u65e5\u671f"},t("endDate",n)(r.a.createElement(_.a,null))),r.a.createElement(g.a.Item,{label:"\u6d3b\u52d5\u6a19\u984c"},t("summary",{initialValue:this.state.default.summary,rules:[{required:!0,message:"\u5fc5\u586b\u6b04\u4f4d\u5537"},{validator:function(e,t,a){/^[\u4e00-\u9fa5a-zA-Z0-9.]{0,30}$/.test(t)?a():a("\u542b\u932f\u8aa4\u5b57\u5143")}}]})(r.a.createElement(y.a,{placeholder:"\u6d3b\u52d5\u6a19\u984c"}))))))}}]),t}(r.a.Component),N=g.a.create()(Y);function H(e){var t=new URL(e).searchParams,a={},n=!0,r=!1,o=void 0;try{for(var s,c=t.entries()[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value;a[l[0]]=l[1]}}catch(i){r=!0,o=i}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}a(67);var M=a(20),V=(a(314),function(e,t){"OK"===t?(e.reload(),e.form.resetFields(),E.a.success("\u5275\u5efa\u5b8c\u6210")):E.a.error("\u5275\u5efa\u5931\u6557")}),F=g.a.create()(function(e){var t=e.form.getFieldDecorator,a={rules:[{type:"object",required:!0,message:"\u8acb\u9078\u64c7\u65e5\u671f"}]};return r.a.createElement("li",{className:"todo__item--add"},r.a.createElement("div",{className:"todo__content"},r.a.createElement("div",{className:"form__group"},r.a.createElement(g.a,null,r.a.createElement(g.a.Item,{label:"\u958b\u59cb\u65e5\u671f"},t("startDate",a)(r.a.createElement(_.a,null))),r.a.createElement(g.a.Item,{label:"\u7d50\u675f\u65e5\u671f"},t("endDate",a)(r.a.createElement(_.a,null))),r.a.createElement(g.a.Item,{label:"\u6d3b\u52d5\u6a19\u984c",hasFeedback:!0},t("summary",{initialValue:"",rules:[{required:!0,message:"\u5fc5\u586b\u6b04\u4f4d\u5537"},{validator:function(e,t,a){/^[\u4e00-\u9fa5a-zA-Z0-9.]{0,30}$/.test(t)?a():a("\u542b\u932f\u8aa4\u5b57\u5143")}}]})(r.a.createElement(y.a,{placeholder:"\u6d3b\u52d5\u6a19\u984c"})))))),r.a.createElement("div",{className:"todo__actions"},r.a.createElement(M.a,{onClick:function(){var t=e.form.getFieldsValue();e.form.validateFields(function(){var a=Object(v.a)(b.a.mark(function a(n){var r;return b.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!n){a.next=2;break}return a.abrupt("return");case 2:return t.endDate=t.endDate.format("YYYY-MM-DD"),t.startDate=t.startDate.format("YYYY-MM-DD"),t.token=e.token,a.next=7,O.post("/todolist",t);case 7:r=a.sent,V(e,r.data.data);case 9:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}())},type:"primary"},"\u9001\u51fa"),r.a.createElement(M.a,null,"\u53d6\u6d88")))}),C=(a(316),a(318),a(320),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).token="",a.state={inputValue:"",list:[],loading:!1,edit:!1},a.getListResultHandler=function(e){500===e.data.code&&(E.a.error(e.data.msg),a.props.history.push("/")),console.log("data",e.data.data),a.setState({list:e.data.data,loading:!1})},a.reload=Object(v.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.next=3,O.get("/todolist?token=".concat(a.token));case 3:t=e.sent,a.getListResultHandler(t);case 5:case"end":return e.stop()}},e)})),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.list.filter(function(e){return"confirmed"===e.status&&e}),a=this.state.list.filter(function(e){return"confirmed"!==e.status&&e});return r.a.createElement("main",{className:"wrapper"},r.a.createElement("section",{className:"section section-todo"},r.a.createElement("div",{className:"todo"},r.a.createElement("h1",{className:"heading-primary"},r.a.createElement("span",{className:"heading-primary--main"},"Todo List")),r.a.createElement("ul",{className:"todo__list"},r.a.createElement(f.a,{spinning:this.state.loading},r.a.createElement("h5",null,"\u4ee3\u8fa6\u6e05\u55ae"),a.map(function(t,a){return r.a.createElement(N,{key:t.id,id:t.id,content:t.summary,status:t.status,token:e.token,reload:e.reload})}),r.a.createElement("h5",null,"\u5df2\u5b8c\u6210"),t.map(function(t,a){return r.a.createElement(N,{key:t.id,id:t.id,content:t.summary,status:t.status,token:e.token,reload:e.reload})})),r.a.createElement("h5",null,"\u65b0\u589e\u4efb\u52d9"),r.a.createElement(F,{token:this.token,reload:this.reload})))))}},{key:"componentDidMount",value:function(){var e=Object(v.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.token=H(document.location.href).token,this.setState({loading:!0}),e.next=4,O.get("/todolist?token=".concat(this.token));case 4:t=e.sent,this.getListResultHandler(t);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component)),T=Object(p.e)(C),I=(a(326),function(){return r.a.createElement("div",null,r.a.createElement(M.a,{className:"btn-login",type:"primary",onClick:function(){document.location.href="http://localhost:5000/api/auth/google"}},"Google \u6388\u6b0a"))}),L=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/",exact:!0,component:I}),r.a.createElement(p.a,{path:"/todolist",component:T})))}}]),t}(n.Component);s.a.render(r.a.createElement(L,null),document.getElementById("root"))}},[[154,2,1]]]);
//# sourceMappingURL=main.8a996b3b.chunk.js.map